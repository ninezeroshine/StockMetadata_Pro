# Ğ¢Ğ•Ğ¥ĞĞ˜Ğ§Ğ•Ğ¡ĞšĞĞ• Ğ—ĞĞ”ĞĞĞ˜Ğ• (Ğ¢Ğ—) v4.1
**ĞŸÑ€Ğ¾ĞµĞºÑ‚:** StockMetadata Pro (Desktop Application)  
**Ğ¢Ğ¸Ğ¿:** Desktop-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ°Ñ†Ğ¸Ğ¸ (Title, Description, Keywords) ÑÑ‚Ğ¾ĞºĞ¾Ğ²Ñ‹Ñ… Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹.  
**Ğ”Ğ°Ñ‚Ğ°:** Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025  
**ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾:** 23 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ 2025 â€” Ğ°ĞºÑ‚ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑÑ‚ĞµĞºĞ° Ğ¿Ğ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°Ğ¼ MCP Ref Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ  

---

## 1. Ğ¦Ğ•Ğ›Ğ¬ ĞŸĞ ĞĞ•ĞšĞ¢Ğ

Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ ĞºÑ€Ğ¾ÑÑĞ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ĞµĞ½Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ (Windows/macOS), ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğµ:
1. ĞŸÑ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (**JPG, JPEG, PNG**) Ñ Ğ³Ğ¸Ğ±ĞºĞ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ² (EPS, TIFF, WebP).
2. ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸Ñ… Ñ‡ĞµÑ€ĞµĞ· **OpenRouter API** (Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ ÑĞµĞ¼ĞµĞ¹ÑÑ‚Ğ²Ğ° Gemini Flash).
3. Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº, ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ, ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ°) Ğ¿Ğ¾ ÑÑ‚Ñ€Ğ¾Ğ³Ğ¸Ğ¼ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°Ğ¼ ÑÑ‚Ğ¾ĞºĞ¾Ğ².
4. ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸ Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ² (Drag & Drop).
5. Ğ—Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾ Ğ² Ñ„Ğ°Ğ¹Ğ» (IPTC/XMP) Ñ‡ĞµÑ€ĞµĞ· ExifTool.

---

## 2. Ğ¢Ğ•Ğ¥ĞĞĞ›ĞĞ“Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™ Ğ¡Ğ¢Ğ•Ğš

| ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | Ğ’ĞµÑ€ÑĞ¸Ñ/ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ |
|-----------|------------|-------------------|
| **Build Tool** | `electron-vite` | v2.3+ â€” ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Electron |
| **Core** | Electron | v28+ (Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ) |
| **Frontend** | React + TypeScript | React 18.3+, TypeScript 5.5+ |
| **UI Framework** | TailwindCSS + shadcn/ui | **TailwindCSS v4** (`@import "tailwindcss"`, `@tailwindcss/vite` Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½) |
| **State Management** | Zustand | v5+ (Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ´Ğ»Ñ Electron: Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹, Ğ±ĞµĞ· Ğ±Ğ¾Ğ¹Ğ»ĞµÑ€Ğ¿Ğ»ĞµĞ¹Ñ‚Ğ°) |
| **Backend Logic** | Node.js (Main Process) | **v20.19+ Ğ¸Ğ»Ğ¸ v22.12+** (Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ electron-vite 2.0) |
| **Vite** | Vite | **v5.0+** (Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ electron-vite 2.0) |
| **Image Processing** | `sharp` | v0.33+ |
| **Metadata Engine** | `exiftool-vendored` | v28+ |
| **AI Integration** | `openai` (npm) | v4.67+ (Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ° Ğ½Ğ° OpenRouter) |
| **Settings Storage** | `electron-store` | v10+ |
| **API Key Encryption** | `safeStorage` (Electron) | OS-native ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Keychain/DPAPI) |
| **Drag & Drop** | `@dnd-kit/sortable` | v8+ (Ğ´Ğ»Ñ Keywords ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸) |

> [!NOTE]
> **ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ `electron-vite`?** Ğ­Ñ‚Ğ¾ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ build tool Ğ´Ğ»Ñ Electron, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ñ€ĞµÑˆĞ°ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Vite + Electron: Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ±Ğ°Ğ½Ğ´Ğ»Ğ¸Ñ‚ main process Ğ¸ preload scripts, Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ HMR Ğ´Ğ»Ñ renderer, ÑĞ»ĞµĞ´ÑƒĞµÑ‚ best practices Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸ (context isolation).

> [!TIP]
> Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ `openai`, Ñ‚.Ğº. OpenRouter Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ñ‚Ğ¾Ñ‚ Ğ¶Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² â€” ÑÑ‚Ğ¾ ÑƒĞ¿Ñ€Ğ¾Ñ‰Ğ°ĞµÑ‚ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ.

---

## 3. ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ˜ Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞĞ¡Ğ¢Ğ¬

### 3.1 ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹
| ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ | Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
|---------|------------|
| **Local First** | Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾. ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ¶Ğ°Ñ‚Ğ¾Ğµ Ğ¿Ñ€ĞµĞ²ÑŒÑ |
| **API Provider** | OpenRouter.ai |
| **API Keys** | ĞšĞ»ÑÑ‡ ĞĞ• Ğ·Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² ĞºĞ¾Ğ´. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ ÑĞ²Ğ¾Ğ¹ ĞºĞ»ÑÑ‡ Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ… |
| **File Safety** | ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ±ĞµĞºĞ°Ğ¿ Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»Ğ¾Ğ² Ğ¿ĞµÑ€ĞµĞ´ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒÑ (ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾) |

### 3.2 ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

| Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ |
|--------|--------|------------|------------|
| `.jpg`, `.jpeg` | âœ… MVP | IPTC + XMP | ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ ÑÑ‚Ğ¾ĞºĞ¾Ğ² |
| `.png` | âœ… MVP | XMP (PNG tEXt) | ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ ExifTool |
| `.tiff` | ğŸ”® v2.0 | IPTC + XMP | Ğ”Ğ»Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸ |
| `.eps` | ğŸ”® v2.0 | XMP sidecar | Ğ’ĞµĞºÑ‚Ğ¾Ñ€ â€” Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ XMP sidecar Ñ„Ğ°Ğ¹Ğ» |
| `.webp` | ğŸ”® v2.0 | XMP | Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ |

### 3.3 ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|----------|----------|
| ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ñ„Ğ°Ğ¹Ğ»Ğ° | 50 MB |
| ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ (MVP) | `.jpg`, `.jpeg`, `.png` |
| ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ | 500Ã—500 px |
| ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ²ÑŒÑ | 1024Ã—1024 px (ÑĞ¶Ğ°Ñ‚Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ğ² AI) |

### 3.4 Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° (electron-vite)
```
stockmetadata-pro/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                    # Electron Main Process
â”‚   â”‚   â”œâ”€â”€ index.ts             # Entry point
â”‚   â”‚   â”œâ”€â”€ ipc/                 # IPC handlers
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ exiftool.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ openrouter.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ file-processor/  # ğŸ‘ˆ Ğ“Ğ¸Ğ±ĞºĞ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ»Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ²
â”‚   â”‚   â”‚       â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ base.processor.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ jpeg.processor.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ png.processor.ts
â”‚   â”‚   â”‚       â””â”€â”€ types.ts
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”œâ”€â”€ preload/                 # Preload scripts (context bridge)
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ renderer/                # React Frontend
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/          # Zustand stores
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ lib/
â”‚   â”‚   â””â”€â”€ index.html
â”‚   â””â”€â”€ shared/                  # ĞĞ±Ñ‰Ğ¸Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ¸ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹
â”‚       â”œâ”€â”€ types.ts
â”‚       â””â”€â”€ constants.ts
â”œâ”€â”€ resources/                   # Ğ˜ĞºĞ¾Ğ½ĞºĞ¸, Ğ°ÑÑĞµÑ‚Ñ‹
â”œâ”€â”€ electron.vite.config.ts      # ğŸ‘ˆ electron-vite ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³
â”œâ”€â”€ electron-builder.yml
â””â”€â”€ dist/                        # Ğ‘Ğ¸Ğ»Ğ´Ñ‹
```

### 3.5 ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° File Processor (Strategy Pattern)

> [!IMPORTANT]
> Ğ”Ğ»Ñ Ğ³Ğ¸Ğ±ĞºĞ¾Ğ³Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ² Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Strategy. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¸Ğ¼ĞµĞµÑ‚ ÑĞ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ñ€.

```typescript
// src/main/services/file-processor/types.ts
export interface FileProcessor {
  readonly supportedExtensions: string[];
  readonly mimeTypes: string[];
  
  canProcess(filePath: string): boolean;
  extractPreview(filePath: string): Promise<Buffer>;
  readMetadata(filePath: string): Promise<Metadata>;
  writeMetadata(filePath: string, metadata: Metadata): Promise<void>;
}

export interface Metadata {
  title: string;
  description: string;
  keywords: string[];
}
```

```typescript
// src/main/services/file-processor/jpeg.processor.ts
export class JpegProcessor implements FileProcessor {
  readonly supportedExtensions = ['.jpg', '.jpeg'];
  readonly mimeTypes = ['image/jpeg'];

  canProcess(filePath: string): boolean {
    const ext = path.extname(filePath).toLowerCase();
    return this.supportedExtensions.includes(ext);
  }

  async writeMetadata(filePath: string, metadata: Metadata): Promise<void> {
    await exiftool.write(filePath, {
      'IPTC:ObjectName': metadata.title,
      'IPTC:Caption-Abstract': metadata.description,
      'IPTC:Keywords': metadata.keywords,
      'XMP:Title': metadata.title,
      'XMP:Description': metadata.description,
      'XMP:Subject': metadata.keywords,
    });
  }
}
```

```typescript
// src/main/services/file-processor/png.processor.ts
export class PngProcessor implements FileProcessor {
  readonly supportedExtensions = ['.png'];
  readonly mimeTypes = ['image/png'];

  async writeMetadata(filePath: string, metadata: Metadata): Promise<void> {
    // PNG Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ IPTC, Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ XMP
    await exiftool.write(filePath, {
      'XMP:Title': metadata.title,
      'XMP:Description': metadata.description,
      'XMP:Subject': metadata.keywords,
    });
  }
}
```

```typescript
// src/main/services/file-processor/index.ts
const processors: FileProcessor[] = [
  new JpegProcessor(),
  new PngProcessor(),
  // ğŸ‘ˆ Ğ›ĞµĞ³ĞºĞ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹:
  // new TiffProcessor(),
  // new EpsProcessor(),
];

export function getProcessor(filePath: string): FileProcessor | null {
  return processors.find(p => p.canProcess(filePath)) || null;
}

export function getSupportedExtensions(): string[] {
  return processors.flatMap(p => p.supportedExtensions);
}
```

---

## 4. ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬Ğ¡ĞšĞ˜Ğ™ Ğ˜ĞĞ¢Ğ•Ğ Ğ¤Ğ•Ğ™Ğ¡ (UI/UX)

### 4.1 Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾ (Dashboard)

**ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½Ğ¾Ğ²ĞºĞ°:** Split View (Ğ”Ğ²Ğµ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸), ÑĞ¾Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ 30/70.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â‰¡] StockMetadata Pro                            [âš™] [â”€] [â–¡] [Ã—]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“ Drop filesâ”‚  â”‚   â”‚                                     â”‚   â”‚
â”‚  â”‚     here     â”‚  â”‚   â”‚        [PREVIEW IMAGE]              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚                                     â”‚   â”‚
â”‚                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                             â”‚
â”‚  â”‚ ğŸ–¼ img1.jpg  â”‚  â”‚   Title: [________________________________]  â”‚
â”‚  â”‚ âœ… Ready     â”‚  â”‚                                             â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚   Description:                              â”‚
â”‚  â”‚ ğŸ–¼ img2.jpg  â”‚  â”‚   [____________________________________]    â”‚
â”‚  â”‚ â³ Processingâ”‚  â”‚   [____________________________________]    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                                             â”‚
â”‚  â”‚ ğŸ–¼ img3.jpg  â”‚  â”‚   Keywords: (Drag to reorder)               â”‚
â”‚  â”‚ âŒ Error     â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚womanâ”‚ â”‚laptop â”‚ â”‚officeâ”‚ â”‚businessâ”‚ ... â”‚
â”‚                    â”‚   â””â”€â”€Ã—â”€â”€â”˜ â””â”€â”€â”€Ã—â”€â”€â”€â”˜ â””â”€â”€Ã—â”€â”€â”€â”˜ â””â”€â”€â”€â”€Ã—â”€â”€â”€â”˜     â”‚
â”‚  [Clear All]       â”‚                                             â”‚
â”‚                    â”‚   Score: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 78/100                â”‚
â”‚                    â”‚                                             â”‚
â”‚                    â”‚   [ğŸ”„ Regenerate] [ğŸ“‹ Copy All] [ğŸ’¾ Save]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ğ›ĞµĞ²Ğ°Ñ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° (Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²)
| Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---------|----------|
| Drop Zone | ĞĞ±Ğ»Ğ°ÑÑ‚ÑŒ Ğ´Ğ»Ñ Drag & Drop Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ². ĞŸĞ¾Ğ´ÑĞ²ĞµÑ‚ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğ¸ |
| Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² | ĞœĞ¸Ğ½Ğ¸Ğ°Ñ‚ÑÑ€Ğ° (60Ã—60px) + Ğ¸Ğ¼Ñ Ñ„Ğ°Ğ¹Ğ»Ğ° + ÑÑ‚Ğ°Ñ‚ÑƒÑ |
| Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑÑ‹ | ğŸ”µ Ğ’ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ / ğŸŸ¡ ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° / ğŸŸ¢ Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ / ğŸ”´ ĞÑˆĞ¸Ğ±ĞºĞ° |
| Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ„Ğ°Ğ¹Ğ»Ğ° | ĞšĞ»Ğ¸Ğº Ğ²Ñ‹Ğ´ĞµĞ»ÑĞµÑ‚ Ñ„Ğ°Ğ¹Ğ» Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ĞµĞ³Ğ¾ Ğ² Ğ¿Ñ€Ğ°Ğ²Ğ¾Ğ¹ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞµ |
| ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ | ĞŸĞšĞœ: "Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ· ÑĞ¿Ğ¸ÑĞºĞ°", "ĞŸĞµÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ" |

#### ĞŸÑ€Ğ°Ğ²Ğ°Ñ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° (Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¾Ğ²)
| Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---------|----------|
| **ĞŸÑ€ĞµĞ²ÑŒÑ** | Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ, Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ´ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ (max-height: 300px) |
| **Title** | Input, Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 200 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ². Ğ¡Ñ‡Ñ‘Ñ‚Ñ‡Ğ¸Ğº ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ² ÑĞ¿Ñ€Ğ°Ğ²Ğ° |
| **Description** | Textarea, 2-3 ÑÑ‚Ñ€Ğ¾ĞºĞ¸. Ğ¡Ñ‡Ñ‘Ñ‚Ñ‡Ğ¸Ğº ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ² |
| **Keywords** | Drag & Drop ÑĞ¿Ğ¸ÑĞ¾Ğº "Ñ‚ĞµĞ³Ğ¾Ğ²-Ñ‡Ğ¸Ğ¿Ğ¾Ğ²". ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‚ĞµĞ³ Ğ¸Ğ¼ĞµĞµÑ‚ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ (Ã—) |
| **Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ³** | Input + Enter Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ñ‚ĞµĞ³Ğ° Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ |
| **Score** | ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€ + Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ (0-100) |
| **ĞšĞ½Ğ¾Ğ¿ĞºĞ¸** | "Regenerate", "Copy All", "Save Metadata" |

### 4.2 ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ (Settings Modal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ Settings                               [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  ğŸ”‘ API Configuration                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  OpenRouter API Key:                            â”‚
â”‚  [sk-or-v1-â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] [ğŸ‘ Show] â”‚
â”‚                                                 â”‚
â”‚  AI Model:                                      â”‚
â”‚  [google/gemini-2.0-flash-001â–¼]                 â”‚
â”‚                                                 â”‚
â”‚  ğŸ“ System Prompt                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  [____________________________________________] â”‚
â”‚  [____________________________________________] â”‚
â”‚  [____________________________________________] â”‚
â”‚  [Reset to Default]                             â”‚
â”‚                                                 â”‚
â”‚  ğŸ’¾ Backup                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  [âœ“] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½ÑƒÑ ĞºĞ¾Ğ¿Ğ¸Ñ Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»Ğ°       â”‚
â”‚  ĞŸĞ°Ğ¿ĞºĞ°: [./backups/_______________] [Browse]   â”‚
â”‚                                                 â”‚
â”‚  ğŸŒ Language                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Metadata Language: [English            â–¼]      â”‚
â”‚                                                 â”‚
â”‚              [Cancel]     [Save Settings]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|-----|----------|
| API Key | password input | ĞšĞ»ÑÑ‡ OpenRouter. Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ·Ğ°ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾ Ñ‡ĞµÑ€ĞµĞ· **Electron safeStorage** (OS-native) |
| Model | dropdown/editable | ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ: `google/gemini-2.0-flash-001`. Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ |
| System Prompt | textarea | ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚. Ğ•ÑÑ‚ÑŒ ĞºĞ½Ğ¾Ğ¿ĞºĞ° ÑĞ±Ñ€Ğ¾ÑĞ° Ğº Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ñƒ |
| Backup | checkbox | Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ/Ğ²Ñ‹ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ±ĞµĞºĞ°Ğ¿. ĞŸÑƒÑ‚ÑŒ Ğº Ğ¿Ğ°Ğ¿ĞºĞµ Ğ±ĞµĞºĞ°Ğ¿Ğ¾Ğ² |
| Language | dropdown | Ğ¯Ğ·Ñ‹Ğº Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…: English, Russian, Spanish, French, German |

### 4.3 Ğ“Ğ¾Ñ€ÑÑ‡Ğ¸Ğµ ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ¸

| ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ |
|------------|----------|
| `Ctrl/Cmd + O` | ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»Ñ‹ |
| `Ctrl/Cmd + V` | Ğ’ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ¸Ğ· Ğ±ÑƒÑ„ĞµÑ€Ğ° |
| `Ctrl/Cmd + S` | Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ° |
| `Ctrl/Cmd + Shift + S` | Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ²ÑĞµÑ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² |
| `Ctrl/Cmd + R` | Ğ ĞµĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ |
| `Ctrl/Cmd + C` | ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑĞµ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ğ±ÑƒÑ„ĞµÑ€ |
| `Delete` | Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞ³ |
| `Ctrl/Cmd + ,` | ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ |
| `Escape` | Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¼Ğ¾Ğ´Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¾ĞºĞ½Ğ° |

---

## 5. Ğ›ĞĞ“Ğ˜ĞšĞ Ğ ĞĞ‘ĞĞ¢Ğ« (ALGORITHMS)

### 5.1 ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ OpenRouter

```typescript
import OpenAI from 'openai';

const openai = new OpenAI({
  baseURL: "https://openrouter.ai/api/v1",
  apiKey: userSettings.apiKey,
  defaultHeaders: {
    "HTTP-Referer": "https://stockmetadata.pro",
    "X-Title": "StockMetadata Pro"
  },
});
```

### 5.2 ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|----------|----------|
| Model | `google/gemini-2.0-flash-001` (Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ğ¾) |
| Response Format | `{ type: "json_object" }` |
| Max Tokens | 2048 |
| Temperature | 0.3 (Ğ´Ğ»Ñ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸) |

### 5.3 System Prompt (Default)

```markdown
You are an expert stock photography metadata specialist. Your task is to analyze images and generate SEO-optimized metadata for microstock platforms (Shutterstock, Adobe Stock, iStock).

## OUTPUT FORMAT
Return a valid JSON object with this exact structure:
{
  "title": "string",
  "description": "string", 
  "keywords": ["array", "of", "strings"]
}

## TITLE REQUIREMENTS
- Length: 50-200 characters
- Format: [Main Subject] + [Action/State] + [Context/Setting]
- Start with the main subject (noun)
- Use present tense for actions
- NO articles at the beginning (a, an, the)
- NO punctuation at the end
- NO brand names or trademarked terms

GOOD EXAMPLES:
- "Young woman working on laptop in modern coworking space"
- "Golden retriever running through autumn leaves in park"
- "Fresh vegetables and fruits arranged on wooden kitchen table"

BAD EXAMPLES:
- "A beautiful woman" (article + subjective)
- "Nice photo of a dog" (meta-reference)
- "iPhone on table" (brand name)

## DESCRIPTION REQUIREMENTS
- Length: 100-200 characters
- One or two complete sentences
- Expand on the title with additional context
- Include 2-3 important keywords naturally
- Describe mood, atmosphere, or use case when relevant

## KEYWORD REQUIREMENTS
- Count: exactly 45-50 keywords
- Format: single words or 2-word phrases, lowercase
- Sorting: by visual relevance (most prominent objects first)
- NO duplicates or near-duplicates
- NO plural forms if singular exists
- NO brand names
- Include: main objects, colors, emotions, concepts, use cases

KEYWORD CATEGORIES TO COVER:
1. Main subjects (30%): What is in the image
2. Actions/States (15%): What is happening
3. Setting/Context (15%): Where it takes place
4. Mood/Emotion (10%): How it feels
5. Colors/Style (10%): Visual attributes
6. Use Cases (10%): Who would use this
7. Abstract Concepts (10%): Related ideas

## LANGUAGE
Generate all content in: {{LANGUAGE}}

## BLACKLIST - NEVER USE THESE WORDS:
beautiful, gorgeous, stunning, amazing, awesome, perfect, best, nice, good, great,
4k, 8k, hd, high quality, professional, stock photo, royalty free, 
wallpaper, background image, copy space, negative space,
iPhone, Samsung, Apple, Nike, Adidas, Google, Microsoft, Adobe, 
Canon, Nikon, Sony, Mercedes, BMW, Tesla, Coca-Cola, Pepsi,
Â© copyright, watermark, logo
```

### 5.4 Batch Processing

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|----------|----------|
| ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ | Max 2 Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ |
| Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ğ¼Ğ¸ | 500ms (rate limiting) |
| ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ | FIFO (First In, First Out) |
| Retry Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ | 2 Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸ Ñ ÑĞºÑĞ¿Ğ¾Ğ½ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ backoff |
| Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° | 60 ÑĞµĞºÑƒĞ½Ğ´ |

```typescript
interface QueueItem {
  id: string;
  filePath: string;
  status: 'pending' | 'processing' | 'done' | 'error';
  retryCount: number;
  result?: MetadataResult;
  error?: string;
}
```

---

## 6. Ğ’ĞĞ›Ğ˜Ğ”ĞĞ¦Ğ˜Ğ¯ Ğ˜ Ğ¡ĞšĞĞ Ğ˜ĞĞ“

### 6.1 Blacklist ÑĞ»Ğ¾Ğ²

```typescript
const BLACKLIST_WORDS = [
  // Ğ¡ÑƒĞ±ÑŠĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ°
  'beautiful', 'gorgeous', 'stunning', 'amazing', 'awesome', 
  'perfect', 'best', 'nice', 'good', 'great', 'wonderful',
  
  // Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞ¿Ğ°Ğ¼-ÑĞ»Ğ¾Ğ²Ğ°
  '4k', '8k', 'hd', 'uhd', 'high quality', 'high resolution',
  'professional', 'stock photo', 'royalty free', 'royalty-free',
  
  // Ğ‘ĞµÑÑĞ¼Ñ‹ÑĞ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
  'wallpaper', 'background image', 'copy space', 'negative space',
  'horizontal', 'vertical', 'square',
  
  // Ğ‘Ñ€ĞµĞ½Ğ´Ñ‹ (Ñ‡Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº)
  'iphone', 'samsung', 'apple', 'nike', 'adidas', 'google', 
  'microsoft', 'adobe', 'canon', 'nikon', 'sony', 
  'mercedes', 'bmw', 'tesla', 'coca-cola', 'pepsi',
  'facebook', 'instagram', 'twitter', 'tiktok', 'youtube',
  
  // ĞĞ²Ñ‚Ğ¾Ñ€ÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ°
  'copyright', 'watermark', 'logo', 'trademark'
];

const BLACKLIST_BRANDS = [
  // Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ±Ñ€ĞµĞ½Ğ´Ğ¾Ğ² - Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ Ğ¸Ğ· Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ°
  // brands-blacklist.json
];
```

### 6.2 Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° AI

```typescript
interface ValidationResult {
  isValid: boolean;
  errors: string[];
  warnings: string[];
  cleanedData: MetadataResult;
}

function validateMetadata(data: MetadataResult): ValidationResult {
  const errors: string[] = [];
  const warnings: string[] = [];
  
  // Title validation
  if (data.title.length < 50) errors.push('Title too short (min 50 chars)');
  if (data.title.length > 200) errors.push('Title too long (max 200 chars)');
  if (/^(a|an|the)\s/i.test(data.title)) warnings.push('Title starts with article');
  
  // Description validation
  if (data.description.length < 100) warnings.push('Description could be longer');
  if (data.description.length > 200) data.description = data.description.slice(0, 200);
  
  // Keywords validation
  if (data.keywords.length < 40) errors.push('Too few keywords (min 40)');
  if (data.keywords.length > 50) data.keywords = data.keywords.slice(0, 50);
  
  // Blacklist filtering
  data.keywords = data.keywords.filter(kw => 
    !BLACKLIST_WORDS.includes(kw.toLowerCase())
  );
  
  // Duplicate removal
  data.keywords = [...new Set(data.keywords.map(k => k.toLowerCase()))];
  
  return {
    isValid: errors.length === 0,
    errors,
    warnings,
    cleanedData: data
  };
}
```

### 6.3 Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° ÑĞºĞ¾Ñ€Ğ¸Ğ½Ğ³Ğ°

```typescript
function calculateScore(metadata: MetadataResult): number {
  let score = 0;
  
  // Title (max 30 points)
  const titleLen = metadata.title.length;
  if (titleLen >= 50 && titleLen <= 200) {
    score += 20;
    if (titleLen >= 80 && titleLen <= 150) score += 10; // Optimal range
  } else if (titleLen >= 30) {
    score += 10;
  }
  
  // Description (max 30 points)
  const descLen = metadata.description.length;
  if (descLen >= 100 && descLen <= 200) {
    score += 20;
    if (descLen >= 120) score += 10;
  } else if (descLen >= 50) {
    score += 10;
  }
  
  // Keywords (max 40 points)
  const kwCount = metadata.keywords.length;
  if (kwCount >= 45) {
    score += 40;
  } else if (kwCount >= 40) {
    score += 35;
  } else if (kwCount >= 30) {
    score += 25;
  } else {
    score += Math.floor(kwCount * 0.5);
  }
  
  return Math.min(100, score);
}

// Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
function getScoreColor(score: number): string {
  if (score >= 80) return '#22c55e'; // green
  if (score >= 60) return '#eab308'; // yellow
  if (score >= 40) return '#f97316'; // orange
  return '#ef4444'; // red
}
```

---

## 7. ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ ĞĞ¨Ğ˜Ğ‘ĞĞš

### 7.1 Ğ¢Ğ¸Ğ¿Ñ‹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

| ĞšĞ¾Ğ´ | Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ |
|-----|-----|----------|----------|
| `API_401` | Auth Error | ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ API ĞºĞ»ÑÑ‡ | Modal: "ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ API ĞºĞ»ÑÑ‡ Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ…" |
| `API_429` | Rate Limit | ĞŸÑ€ĞµĞ²Ñ‹ÑˆĞµĞ½ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² | ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ countdown, retry Ñ‡ĞµÑ€ĞµĞ· N ÑĞµĞº |
| `API_500` | Server Error | ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ° OpenRouter | Retry 2 Ñ€Ğ°Ğ·Ğ°, Ğ·Ğ°Ñ‚ĞµĞ¼ skip |
| `API_TIMEOUT` | Timeout | ĞĞµÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° 60+ ÑĞµĞº | Retry 1 Ñ€Ğ°Ğ·, Ğ·Ğ°Ñ‚ĞµĞ¼ mark as error |
| `FILE_READ` | File Error | ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» | Toast: "Ğ¤Ğ°Ğ¹Ğ» Ğ¿Ğ¾Ğ²Ñ€ĞµĞ¶Ğ´Ñ‘Ğ½ Ğ¸Ğ»Ğ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½" |
| `FILE_WRITE` | File Error | ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ | Toast: "ĞÑˆĞ¸Ğ±ĞºĞ° Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°" |
| `FILE_FORMAT` | Validation | ĞĞµĞ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ | Toast: "ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ: JPG, JPEG, PNG" |
| `FILE_SIZE` | Validation | Ğ¤Ğ°Ğ¹Ğ» ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ | Toast: "ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€: 50MB" |
| `JSON_PARSE` | Parse Error | AI Ğ²ĞµÑ€Ğ½ÑƒĞ» Ğ½ĞµĞ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¹ JSON | Retry Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ¼ |

### 7.2 UI Ğ´Ğ»Ñ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

```typescript
// Toast notifications (non-blocking)
toast.error('ĞÑˆĞ¸Ğ±ĞºĞ° API: Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ². ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€ Ñ‡ĞµÑ€ĞµĞ· 30 ÑĞµĞº.');

// Modal (blocking)
showModal({
  type: 'error',
  title: 'ĞÑˆĞ¸Ğ±ĞºĞ° Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸',
  message: 'API ĞºĞ»ÑÑ‡ Ğ½ĞµĞ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ĞµĞ½. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸.',
  actions: [
    { label: 'ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸', onClick: openSettings },
    { label: 'Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ', onClick: closeModal }
  ]
});
```

---

## 8. Ğ—ĞĞŸĞ˜Ğ¡Ğ¬ ĞœĞ•Ğ¢ĞĞ”ĞĞĞĞ«Ğ¥

### 8.1 ExifTool Service

```typescript
import { ExifTool } from 'exiftool-vendored';

const exiftool = new ExifTool({ taskTimeoutMillis: 30000 });

interface WriteMetadataParams {
  filePath: string;
  title: string;
  description: string;
  keywords: string[];
  createBackup: boolean;
}

async function writeMetadata(params: WriteMetadataParams): Promise<void> {
  const { filePath, title, description, keywords, createBackup } = params;
  
  // Backup
  if (createBackup) {
    await createBackupFile(filePath);
  }
  
  // Write metadata
  await exiftool.write(filePath, {
    // IPTC fields
    'IPTC:ObjectName': title,
    'IPTC:Caption-Abstract': description,
    'IPTC:Keywords': keywords,
    
    // XMP fields (for compatibility)
    'XMP:Title': title,
    'XMP:Description': description,
    'XMP:Subject': keywords,
  }, {
    writeArgs: ['-overwrite_original'] // No backup from exiftool (we handle it)
  });
}

// Cleanup on app exit
app.on('before-quit', async () => {
  await exiftool.end();
});
```

### 8.2 ĞœĞ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ Ğ¿Ğ¾Ğ»ĞµĞ¹

| ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ | IPTC Ğ¿Ğ¾Ğ»Ğµ | XMP Ğ¿Ğ¾Ğ»Ğµ |
|------------|-----------|----------|
| Title | `IPTC:ObjectName` | `XMP:Title` |
| Description | `IPTC:Caption-Abstract` | `XMP:Description` |
| Keywords | `IPTC:Keywords` | `XMP:Subject` |

> [!IMPORTANT]
> ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ° Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ÑÑ‚ÑÑ ĞºĞ°Ğº Ğ¼Ğ°ÑÑĞ¸Ğ² (List), ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº. ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚ Ğ¼Ğ°ÑÑĞ¸Ğ²Ğ° â€” ÑĞ°Ğ¼Ñ‹Ğ¹ Ğ²Ğ°Ğ¶Ğ½Ñ‹Ğ¹.

### 8.3 Backup Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

```typescript
async function createBackupFile(filePath: string): Promise<string> {
  const backupDir = userSettings.backupPath || path.join(app.getPath('userData'), 'backups');
  await fs.ensureDir(backupDir);
  
  const timestamp = Date.now();
  const fileName = path.basename(filePath);
  const backupPath = path.join(backupDir, `${timestamp}_${fileName}`);
  
  await fs.copy(filePath, backupPath);
  return backupPath;
}
```

---

## 9. Ğ¥Ğ ĞĞĞ•ĞĞ˜Ğ• Ğ”ĞĞĞĞ«Ğ¥

### 9.1 Electron Store Schema

```typescript
import Store from 'electron-store';

interface AppSettings {
  apiKey: string;          // Encrypted
  model: string;
  systemPrompt: string;
  backupEnabled: boolean;
  backupPath: string;
  metadataLanguage: 'en' | 'ru' | 'es' | 'fr' | 'de';
  windowBounds: {
    x: number;
    y: number;
    width: number;
    height: number;
  };
}

const store = new Store<AppSettings>({
  name: 'settings',
  encryptionKey: 'your-encryption-key', // For API key protection
  defaults: {
    apiKey: '',
    model: 'google/gemini-2.0-flash-001',
    systemPrompt: DEFAULT_SYSTEM_PROMPT,
    backupEnabled: true,
    backupPath: '',
    metadataLanguage: 'en',
    windowBounds: { x: 100, y: 100, width: 1200, height: 800 }
  }
});
```

### 9.2 IPC Communication

```typescript
// Main process handlers
ipcMain.handle('settings:get', () => store.store);
ipcMain.handle('settings:set', (_, key: string, value: any) => store.set(key, value));
ipcMain.handle('metadata:generate', async (_, imagePath: string) => { /* ... */ });
ipcMain.handle('metadata:write', async (_, params: WriteMetadataParams) => { /* ... */ });

// Renderer process usage
const settings = await window.api.getSettings();
await window.api.writeMetadata({ filePath, title, description, keywords });
```

---

## 10. Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•

### 10.1 Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

| Ğ¢Ğ¸Ğ¿ | Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ | ĞŸĞ¾ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ |
|-----|------------|----------|
| Unit Tests | Vitest | â‰¥70% Ğ´Ğ»Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ |
| Integration Tests | Vitest | API Ğ¸ ExifTool services |
| E2E Tests | Playwright | ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ |

### 10.2 Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸

```markdown
## Unit Tests
- [ ] Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Title (Ğ´Ğ»Ğ¸Ğ½Ğ°, Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚)
- [ ] Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Keywords (ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾, Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ñ‹)
- [ ] Blacklist Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
- [ ] Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ ÑĞºĞ¾Ñ€Ğ¸Ğ½Ğ³Ğ°
- [ ] ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ JSON Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°

## Integration Tests
- [ ] OpenRouter API mock
- [ ] ExifTool read/write
- [ ] Settings persistence

## E2E Tests
- [ ] Drag & Drop Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
- [ ] ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ»: Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° â†’ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ â†’ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ â†’ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ
- [ ] ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸
- [ ] ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº (Ğ½ĞµĞ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¹ ĞºĞ»ÑÑ‡)
```

---

## 11. Ğ¡Ğ‘ĞĞ ĞšĞ Ğ˜ Ğ”Ğ˜Ğ¡Ğ¢Ğ Ğ˜Ğ‘Ğ£Ğ¦Ğ˜Ğ¯

### 11.1 Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°

| ĞŸĞ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° | Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ | Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ |
|-----------|--------|------------|
| Windows | `.exe` (NSIS Installer) | electron-builder |
| macOS | `.dmg` | electron-builder |

### 11.2 ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```json
{
  "scripts": {
    "dev": "electron-vite dev",
    "build": "electron-vite build",
    "preview": "electron-vite preview",
    "package": "electron-vite build && electron-builder",
    "package:win": "electron-vite build && electron-builder --win",
    "package:mac": "electron-vite build && electron-builder --mac",
    "test": "vitest",
    "test:e2e": "playwright test"
  }
}
```

### 11.3 Electron Builder Config

```json
{
  "appId": "com.stockmetadata.pro",
  "productName": "StockMetadata Pro",
  "directories": {
    "output": "dist"
  },
  "win": {
    "target": "nsis",
    "icon": "resources/icon.ico"
  },
  "mac": {
    "target": "dmg",
    "icon": "resources/icon.icns",
    "category": "public.app-category.photography"
  },
  "extraResources": [
    {
      "from": "node_modules/exiftool-vendored.exe/bin",
      "to": "exiftool",
      "filter": ["**/*"]
    }
  ]
}
```

---

## 12. ĞšĞ Ğ˜Ğ¢Ğ•Ğ Ğ˜Ğ˜ ĞŸĞ Ğ˜ĞĞœĞšĞ˜

### 12.1 MVP Checklist

- [ ] ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ Ğ½Ğ° Windows Ğ¸ macOS
- [ ] ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ğ²ĞµÑÑ‚Ğ¸ API ĞºĞ»ÑÑ‡ OpenRouter
- [ ] Drag & Drop Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] AI Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‡ĞµÑ€ĞµĞ· Gemini Flash
- [ ] ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Title, Description
- [ ] ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿ĞµÑ€ĞµÑÑ‚Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Keywords (Drag & Drop)
- [ ] ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ² Ñ„Ğ°Ğ¹Ğ» (Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ² Photoshop/Bridge)
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ backup Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»Ğ° (ĞµÑĞ»Ğ¸ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾)
- [ ] ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸

### 12.2 Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°

```markdown
1. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ñ‡Ğ¸ÑÑ‚ÑƒÑ Windows Ğ¼Ğ°ÑˆĞ¸Ğ½Ñƒ
2. Ğ’Ğ²ĞµÑÑ‚Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¹ OpenRouter API ĞºĞ»ÑÑ‡
3. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ 5 Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ñ… Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
4. Ğ”Ğ¾Ğ¶Ğ´Ğ°Ñ‚ÑŒÑÑ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
5. ĞÑ‚Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ´Ğ¸Ğ½ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ
6. ĞŸĞ¾Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ² (Ğ¿ĞµÑ€ĞµĞ¼ĞµÑÑ‚Ğ¸Ñ‚ÑŒ 3 Ñ‚ĞµĞ³Ğ°)
7. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
8. ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» Ğ² Adobe Bridge â†’ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ IPTC/XMP Ğ¿Ğ¾Ğ»Ñ
9. Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ, Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ ÑĞ½Ğ¾Ğ²Ğ° â†’ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹
```

---

## 13. ĞŸĞ Ğ˜Ğ›ĞĞ–Ğ•ĞĞ˜Ğ¯

### ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ A: ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Blacklist

Ğ¡Ğ¼. Ñ„Ğ°Ğ¹Ğ» `data/blacklist.json`

### ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ B: ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¸Ñ… Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

| Image | Title | Description | Keywords (Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ 10) |
|-------|-------|-------------|---------------------|
| Business woman | Senior businesswoman analyzing financial reports on laptop in modern office | Professional female executive reviewing quarterly data and market trends in corporate workspace | businesswoman, laptop, office, professional, executive, corporate, finance, report, analysis, workplace |
| Landscape | Misty mountain valley at sunrise with pine forest and river | Breathtaking view of fog-covered mountains during golden hour with evergreen trees | mountain, valley, sunrise, mist, fog, forest, pine, river, landscape, nature |

### ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ C: Wireframes

*[Figma ÑÑÑ‹Ğ»ĞºĞ° Ğ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ]*

---

**Ğ’ĞµÑ€ÑĞ¸Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°:** 4.  
**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** 23 Ğ”ĞµĞºĞ°Ğ±Ñ€Ñ 2025  
**ĞĞ²Ñ‚Ğ¾Ñ€:** [Ğ˜Ğ¼Ñ]

---

## CHANGELOG

### v4.0 (23 Ğ”ĞµĞºĞ°Ğ±Ñ€Ñ 2025)
- âœ… Ğ—Ğ°Ğ¼ĞµĞ½Ñ‘Ğ½ raw Vite Ğ½Ğ° `electron-vite` (ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ build tool)
- âœ… ĞĞ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½ TailwindCSS Ğ´Ğ¾ v4 (Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ `@import "tailwindcss"`)
- âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° PNG Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ°
- âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ³Ğ¸Ğ±ĞºĞ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° File Processor (Strategy Pattern) Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ²
- âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° `sharp` Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
- âœ… ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ Zustand Ğ´Ğ¾ v5
- âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ´Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ² (TIFF, EPS, WebP Ğ² v2.0)

### v3.0 (Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025)
- ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ¢Ğ—
